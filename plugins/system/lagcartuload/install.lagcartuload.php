<?php  defined ( '_JEXEC' ) or die ( 'Restricted access' );    class plgSystemLagcartuloadInstallerScript {    	public function postflight($type, $parent) {    		if($type=='update' || $type=="install") {			    if(empty($this->_db)){				    $this->_db = JFactory::getDBO();			    }    			$query="CREATE TABLE IF NOT EXISTS `#__lagcartusave` (                    `id` int(15) NOT NULL auto_increment,					`created` DATETIME,                    `vmcart` LONGTEXT NOT NULL,					`userip` VARCHAR(50) NOT NULL,                    `session_id` VARCHAR(50) NOT NULL,                    `userid` int(11) NOT NULL, 					`lifecookcart` int(11) NOT NULL,					`user_agent_info` VARCHAR(5000) NOT NULL,					`reserve_column` VARCHAR(5000) NOT NULL,                    PRIMARY KEY  (`id`)                ) ENGINE=InnoDB DEFAULT CHARSET=utf8;";    			$this->_db->setQuery($query);    			$this->_db->query();    					    }    		if ($type == 'uninstall') return true;        	$this->enablePlugin('system', 'lagcartuload');     	        	return true;    	}    	function enablePlugin($group, $element) {		    //echo $group;    		$plugin = JTable::getInstance('extension');			    		$id = $plugin->find(array('type' => 'plugin', 'folder' => $group, 'element' => $element));			//echo $id ;            if ($id) {                $plugin->load($id);                $plugin->enabled = 1;  				$plugin->store();            }			    	}    }